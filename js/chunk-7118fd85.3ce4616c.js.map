{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./src/views/Dashboard/Orders.vue?6b86","webpack:///src/views/Dashboard/Orders.vue","webpack:///./src/views/Dashboard/Orders.vue?31d1","webpack:///./src/views/Dashboard/Orders.vue"],"names":["$","aFunction","toObject","fails","sloppyArrayMethod","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","SLOPPY_METHOD","FORCED","target","proto","forced","comparefn","call","this","render","_vm","_h","$createElement","_c","_self","attrs","isLoading","on","$event","_v","staticClass","_m","_l","sortedOrders","slice","currPage","itemOfPage","order","key","_id","_s","date","path","showAlertBind","directives","name","rawName","value","expression","deleteOrder","showAlert","totalPage","setPage","staticRenderFns","data","showDelete","removeTempId","components","Pagination","computed","Math","ceil","orders","length","newOrders","methods","n","window","scrollTo","getOrders","$store","dispatch","created","component"],"mappings":"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","file":"js/chunk-7118fd85.3ce4616c.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar SLOPPY_METHOD = sloppyArrayMethod('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || SLOPPY_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading,\"color\":'white',\"background-color\":'#17181c'},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('h1',[_vm._v(\"Orders\")]),_c('div',{staticClass:\"table\"},[_vm._m(0),_vm._l((_vm.sortedOrders.slice(\n        (_vm.currPage - 1) * _vm.itemOfPage,\n        _vm.currPage * _vm.itemOfPage\n      )),function(order){return _c('div',{key:order._id,staticClass:\"table-item\"},[_c('div',[_vm._v(_vm._s(order.date))]),_c('div',[_vm._v(_vm._s(order._id))]),_c('div',[(order.paymentStatus)?_c('span',{staticClass:\"text-success\"},[_vm._v(\"已付款\")]):_c('span',{staticClass:\"text-failure\"},[_vm._v(\"未付款\")])]),_c('div',[_c('router-link',{attrs:{\"to\":{ path: 'order/' + order._id }}},[_c('button',{staticClass:\"edit\"},[_vm._v(\"查看\")])]),_c('button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.showAlertBind(order)}}},[_vm._v(\"刪除\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAlert),expression:\"showAlert\"}],staticClass:\"modal\"},[_c('div',[_vm._v(\"確定要刪除這個訂單嗎?\")]),_c('button',{on:{\"click\":_vm.deleteOrder}},[_vm._v(\"確定\")]),_c('button',{on:{\"click\":function($event){_vm.showAlert = false}}},[_vm._v(\"取消\")])])],1)])})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDelete),expression:\"showDelete\"}],staticClass:\"modal\"},[_vm._v(\"刪除成功\")]),_c('Pagination',{attrs:{\"currPage\":_vm.currPage,\"totalPage\":_vm.totalPage},on:{\"setPage\":_vm.setPage}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"table-item\"},[_c('div',[_vm._v(\"購買日期\")]),_c('div',[_vm._v(\"訂單編號\")]),_c('div',[_vm._v(\"是否付款\")]),_c('div',[_vm._v(\"操作\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <loading\r\n      :active.sync=\"isLoading\"\r\n      :color=\"'white'\"\r\n      :background-color=\"'#17181c'\"\r\n    ></loading>\r\n    <h1>Orders</h1>\r\n    <div class=\"table\">\r\n      <div class=\"table-item\">\r\n        <div>購買日期</div>\r\n        <div>訂單編號</div>\r\n        <div>是否付款</div>\r\n        <div>操作</div>\r\n      </div>\r\n      <div\r\n        class=\"table-item\"\r\n        v-for=\"order in sortedOrders.slice(\r\n          (currPage - 1) * itemOfPage,\r\n          currPage * itemOfPage\r\n        )\"\r\n        :key=\"order._id\"\r\n      >\r\n        <div>{{ order.date }}</div>\r\n        <div>{{ order._id }}</div>\r\n        <div>\r\n          <span class=\"text-success\" v-if=\"order.paymentStatus\">已付款</span>\r\n          <span class=\"text-failure\" v-else>未付款</span>\r\n        </div>\r\n        <div>\r\n          <router-link :to=\"{ path: 'order/' + order._id }\">\r\n            <button class=\"edit\">查看</button>\r\n          </router-link>\r\n          <button class=\"delete\" @click=\"showAlertBind(order)\">刪除</button>\r\n          <!-- alert -->\r\n          <div class=\"modal\" v-show=\"showAlert\">\r\n            <div>確定要刪除這個訂單嗎?</div>\r\n            <button @click=\"deleteOrder\">確定</button>\r\n            <button @click=\"showAlert = false\">取消</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal\" v-show=\"showDelete\">刪除成功</div>\r\n    <!-- Pagination -->\r\n    <Pagination\r\n      :currPage=\"currPage\"\r\n      :totalPage=\"totalPage\"\r\n      @setPage=\"setPage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport Pagination from \"@/components/Pagination.vue\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      currPage: 1,\r\n      showAlert: false,\r\n      showDelete: false,\r\n      removeTempId: \"\",\r\n    };\r\n  },\r\n  components: {\r\n    Pagination,\r\n  },\r\n  computed: {\r\n    ...mapState([\"orders\", \"itemOfPage\", \"isLoading\"]),\r\n    totalPage() {\r\n      return Math.ceil(this.orders.length / this.itemOfPage);\r\n    },\r\n    sortedOrders() {\r\n      let newOrders = [...this.orders];\r\n      newOrders = newOrders.sort((a, b) => (a.date < b.date ? 1 : -1));\r\n      return newOrders;\r\n    },\r\n  },\r\n  methods: {\r\n    setPage(n) {\r\n      if (this.currPage !== n) {\r\n        this.currPage = n;\r\n        window.scrollTo(0, 0);\r\n      }\r\n    },\r\n    showAlertBind(order) {\r\n      this.showAlert = true;\r\n      this.removeTempId = order._id;\r\n    },\r\n    async deleteOrder() {\r\n      this.$store.state.isLoading = true;\r\n      this.showAlert = false;\r\n      try {\r\n        await axios.delete(process.env.VUE_APP_ORDERS_URL + this.removeTempId, {\r\n          headers: { token: this.$store.state.token },\r\n        });\r\n        this.getOrders();\r\n        this.showDelete = true;\r\n        setTimeout(() => {\r\n          this.showDelete = false;\r\n        }, 1000);\r\n      } catch (err) {\r\n        alert(\"此帳號無法進行操作\");\r\n        this.$store.state.isLoading = false;\r\n      }\r\n    },\r\n    getOrders() {\r\n      this.$store.dispatch(\"getOrders\", process.env.VUE_APP_ORDERS_URL);\r\n    },\r\n  },\r\n  created() {\r\n    this.getOrders();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Orders.vue?vue&type=template&id=56a4df02&\"\nimport script from \"./Orders.vue?vue&type=script&lang=js&\"\nexport * from \"./Orders.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}