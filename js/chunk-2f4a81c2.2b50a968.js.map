{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.date.to-string.js","webpack:///./src/views/CartPage.vue?6f8a","webpack:///./src/views/CartPage.vue?6841","webpack:///src/views/CartPage.vue","webpack:///./src/views/CartPage.vue?9e88","webpack:///./src/views/CartPage.vue"],"names":["redefine","DatePrototype","Date","prototype","INVALID_DATE","TO_STRING","nativeDateToString","getTime","NaN","value","call","this","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","cart","_m","_v","clearAll","_l","product","key","id","deleteProduct","src","name","_s","quantity","price","totalPrice","directives","rawName","discountPrice","expression","domProps","type","indexOf","_k","keyCode","submitCoupon","target","composing","couponCode","staticRenderFns","data","computed","methods","getCoupons","$store","dispatch","commit","state","localStorage","setItem","JSON","stringify","e","previousElementSibling","focus","setTimeout","index","foundCoupon","is_enabled","alert","created","component"],"mappings":"qGAAA,IAAIA,EAAW,EAAQ,QAEnBC,EAAgBC,KAAKC,UACrBC,EAAe,eACfC,EAAY,WACZC,EAAqBL,EAAcI,GACnCE,EAAUN,EAAcM,QAIxB,IAAIL,KAAKM,KAAO,IAAMJ,GACxBJ,EAASC,EAAeI,GAAW,WACjC,IAAII,EAAQF,EAAQG,KAAKC,MAEzB,OAAOF,IAAUA,EAAQH,EAAmBI,KAAKC,MAAQP,M,oCCd7D,yBAAqiB,EAAG,G,kECAxiB,IAAIQ,EAAS,WAAa,IAAIC,EAAIF,KAASG,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,UAAU,CAACG,MAAM,CAAC,OAASN,EAAIO,UAAU,MAAQ,QAAQ,mBAAmB,WAAWC,GAAG,CAAC,gBAAgB,SAASC,GAAQT,EAAIO,UAAUE,MAAYT,EAAIU,KAAW,OAAEP,EAAG,MAAM,CAACH,EAAIW,GAAG,GAAGR,EAAG,KAAK,CAACH,EAAIY,GAAG,WAAWT,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,SAAS,CAACK,GAAG,CAAC,MAAQR,EAAIa,WAAW,CAACb,EAAIY,GAAG,UAAUT,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACL,EAAIY,GAAG,QAAQT,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACL,EAAIY,GAAG,QAAQT,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACL,EAAIY,GAAG,QAAQT,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACL,EAAIY,GAAG,UAAUZ,EAAIc,GAAId,EAAQ,MAAE,SAASe,GAAS,OAAOZ,EAAG,MAAM,CAACa,IAAID,EAAQE,GAAGZ,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,OAAO,CAACK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIkB,cAAcH,MAAY,CAACf,EAAIY,GAAG,SAAST,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMS,EAAQI,IAAI,IAAMJ,EAAQK,QAAQjB,EAAG,MAAM,CAACH,EAAIY,GAAGZ,EAAIqB,GAAGN,EAAQK,WAAWjB,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACL,EAAIY,GAAGZ,EAAIqB,GAAGN,EAAQO,aAAanB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACL,EAAIY,GAAG,IAAIZ,EAAIqB,GAAGN,EAAQQ,UAAUpB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACL,EAAIY,GAAG,KAAKZ,EAAIqB,GAAGN,EAAQO,SAAWP,EAAQQ,OAAO,YAAWpB,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACL,EAAIY,GAAG,SAASZ,EAAIqB,GAAGrB,EAAIwB,eAAerB,EAAG,MAAM,CAACsB,WAAW,CAAC,CAACL,KAAK,OAAOM,QAAQ,SAAS9B,MAAOI,EAAI2B,gBAAkB3B,EAAIwB,WAAYI,WAAW,iCAAiCvB,YAAY,kCAAkC,CAACL,EAAIY,GAAG,WAAWZ,EAAIqB,GAAGrB,EAAI2B,eAAe,OAAOxB,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,QAAQ,CAACsB,WAAW,CAAC,CAACL,KAAK,QAAQM,QAAQ,UAAU9B,MAAOI,EAAc,WAAE4B,WAAW,eAAetB,MAAM,CAAC,KAAO,OAAO,YAAc,UAAUuB,SAAS,CAAC,MAAS7B,EAAc,YAAGQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOqB,KAAKC,QAAQ,QAAQ/B,EAAIgC,GAAGvB,EAAOwB,QAAQ,QAAQ,GAAGxB,EAAOO,IAAI,SAAkB,KAAchB,EAAIkC,aAAazB,IAAS,MAAQ,SAASA,GAAWA,EAAO0B,OAAOC,YAAqBpC,EAAIqC,WAAW5B,EAAO0B,OAAOvC,WAAUO,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,SAASE,GAAG,CAAC,MAAQR,EAAIkC,mBAAmB,GAAG/B,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,GAAK,MAAM,CAACH,EAAG,SAAS,CAACE,YAAY,kBAAkB,CAACL,EAAIY,GAAG,eAAeT,EAAG,cAAc,CAACG,MAAM,CAAC,GAAK,iBAAiB,CAACH,EAAG,SAAS,CAACE,YAAY,iBAAiB,CAACL,EAAIY,GAAG,mBAAmB,KAAKT,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,KAAK,CAACH,EAAIY,GAAG,UAAUT,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,EAAQ,QAAuB,IAAM,MAAMH,EAAG,MAAM,CAACA,EAAG,cAAc,CAACG,MAAM,CAAC,GAAK,MAAM,CAACH,EAAG,SAAS,CAACE,YAAY,kBAAkB,CAACL,EAAIY,GAAG,gBAAgB,MAAM,IAC9vF0B,EAAkB,CAAC,WAAa,IAAItC,EAAIF,KAASG,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACL,EAAIY,GAAG,cAAcT,EAAG,MAAM,CAACH,EAAIY,GAAG,cAAcT,EAAG,MAAM,CAACH,EAAIY,GAAG,iB,gsBC6EtP,OACEQ,KAAM,OACNmB,KAFF,WAGI,MAAO,CACLF,WAAY,QACZ9B,WAAW,IAGfiC,SAAU,EAAZ,0DACEC,QAAS,CACPC,WADJ,WAEM5C,KAAK6C,OAAOC,SAAS,aAAc,wDAErC1B,cAJJ,SAIA,GACMpB,KAAK6C,OAAOE,OAAO,gBAAiB9B,IAEtCF,SAPJ,WAQMf,KAAK6C,OAAOG,MAAMpC,KAAO,GACzBqC,aAAaC,QAAQ,OAAQC,KAAKC,UAAUpD,KAAKY,QAEnDwB,aAXJ,SAWA,cACM,GAAwB,KAApBpC,KAAKuC,WACPc,EAAEhB,OAAOiB,uBAAuBC,YACxC,CACQvD,KAAKS,WAAY,EACjB,IAAR,uCACA,YAAU,OAAV,yBAEQ+C,YAAW,WACT,IAAe,IAAXC,EAAc,CAChB,IAAZ,4BACA,uBACiBC,EAAYC,WAE7B,kCACcC,MAAM,WAEN,EAAd,oDACA,GACA,QACc,EAAd,eAPcA,MAAM,eAURA,MAAM,UACN,EAAZ,kCAEU,EAAV,eACA,QAIEC,QAnDF,WAoDI7D,KAAK4C,eClIyU,I,wBCQ9UkB,EAAY,eACd,EACA7D,EACAuC,GACA,EACA,KACA,WACA,MAIa,aAAAsB,E","file":"js/chunk-2f4a81c2.2b50a968.js","sourcesContent":["var redefine = require('../internals/redefine');\n\nvar DatePrototype = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar nativeDateToString = DatePrototype[TO_STRING];\nvar getTime = DatePrototype.getTime;\n\n// `Date.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-date.prototype.tostring\nif (new Date(NaN) + '' != INVALID_DATE) {\n  redefine(DatePrototype, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare\n    return value === value ? nativeDateToString.call(this) : INVALID_DATE;\n  });\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CartPage.vue?vue&type=style&index=0&id=0906ead0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CartPage.vue?vue&type=style&index=0&id=0906ead0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart\"},[_c('loading',{attrs:{\"active\":_vm.isLoading,\"color\":'white',\"background-color\":'#17181c'},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),(_vm.cart.length)?_c('div',[_vm._m(0),_c('h1',[_vm._v(\"購物車清單\")]),_c('div',{staticClass:\"cart-information\"},[_c('div',{staticClass:\"cart-item\"},[_c('div',{staticClass:\"cart-item__action\"},[_c('button',{on:{\"click\":_vm.clearAll}},[_vm._v(\"清除\")])]),_c('div',{staticClass:\"cart-item__name\"},[_vm._v(\"商品\")]),_c('div',{staticClass:\"cart-item__quantity\"},[_vm._v(\"數量\")]),_c('div',{staticClass:\"cart-item__price\"},[_vm._v(\"單價\")]),_c('div',{staticClass:\"cart-item__total\"},[_vm._v(\"小計\")])]),_vm._l((_vm.cart),function(product){return _c('div',{key:product.id,staticClass:\"cart-item\"},[_c('div',{staticClass:\"cart-item__action\"},[_c('span',{on:{\"click\":function($event){return _vm.deleteProduct(product)}}},[_vm._v(\"x\")])]),_c('div',{staticClass:\"cart-item__name\"},[_c('img',{attrs:{\"src\":product.src,\"alt\":product.name}}),_c('div',[_vm._v(_vm._s(product.name))])]),_c('div',{staticClass:\"cart-item__quantity\"},[_vm._v(_vm._s(product.quantity))]),_c('div',{staticClass:\"cart-item__price\"},[_vm._v(\"$\"+_vm._s(product.price))]),_c('div',{staticClass:\"cart-item__total\"},[_vm._v(\" $\"+_vm._s(product.quantity * product.price)+\" \")])])}),_c('div',{staticClass:\"cart-item total-price\"},[_vm._v(\"總計金額 $\"+_vm._s(_vm.totalPrice))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.discountPrice !== _vm.totalPrice),expression:\"discountPrice !== totalPrice\"}],staticClass:\"cart-item total-price discount\"},[_vm._v(\" 折扣後金額 $\"+_vm._s(_vm.discountPrice)+\" \")]),_c('div',{staticClass:\"coupon\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.couponCode),expression:\"couponCode\"}],attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.couponCode)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitCoupon($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.couponCode=$event.target.value}}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"套用優惠碼\"},on:{\"click\":_vm.submitCoupon}})])],2),_c('div',{staticClass:\"cart-action\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_c('button',{staticClass:\"step__shopping\"},[_vm._v(\"<< 繼續購物\")])]),_c('router-link',{attrs:{\"to\":\"/createorder\"}},[_c('button',{staticClass:\"step__primary\"},[_vm._v(\"下一步：填寫收件資料\")])])],1)]):_c('div',{staticClass:\"cart__empty\"},[_c('h1',[_vm._v(\"尚無商品\")]),_c('img',{attrs:{\"src\":require(\"../assets/smile.png\"),\"alt\":\"\"}}),_c('div',[_c('router-link',{attrs:{\"to\":\"/\"}},[_c('button',{staticClass:\"step__shopping\"},[_vm._v(\"<< 繼續購物\")])])],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart-header\"},[_c('div',{staticClass:\"active\"},[_vm._v(\"1.確認購買清單\")]),_c('div',[_vm._v(\"2.填寫收件資訊\")]),_c('div',[_vm._v(\"3.完成訂單!\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"cart\">\r\n    <loading\r\n      :active.sync=\"isLoading\"\r\n      :color=\"'white'\"\r\n      :background-color=\"'#17181c'\"\r\n    ></loading>\r\n    <div v-if=\"cart.length\">\r\n      <div class=\"cart-header\">\r\n        <div class=\"active\">1.確認購買清單</div>\r\n        <div>2.填寫收件資訊</div>\r\n        <div>3.完成訂單!</div>\r\n      </div>\r\n      <h1>購物車清單</h1>\r\n      <div class=\"cart-information\">\r\n        <div class=\"cart-item\">\r\n          <div class=\"cart-item__action\">\r\n            <button @click=\"clearAll\">清除</button>\r\n          </div>\r\n          <div class=\"cart-item__name\">商品</div>\r\n          <div class=\"cart-item__quantity\">數量</div>\r\n          <div class=\"cart-item__price\">單價</div>\r\n          <div class=\"cart-item__total\">小計</div>\r\n        </div>\r\n        <div class=\"cart-item\" v-for=\"product of cart\" :key=\"product.id\">\r\n          <div class=\"cart-item__action\">\r\n            <span @click=\"deleteProduct(product)\">x</span>\r\n          </div>\r\n          <div class=\"cart-item__name\">\r\n            <img :src=\"product.src\" :alt=\"product.name\" />\r\n            <div>{{ product.name }}</div>\r\n          </div>\r\n          <div class=\"cart-item__quantity\">{{ product.quantity }}</div>\r\n          <div class=\"cart-item__price\">${{ product.price }}</div>\r\n          <div class=\"cart-item__total\">\r\n            ${{ product.quantity * product.price }}\r\n          </div>\r\n        </div>\r\n        <div class=\"cart-item total-price\">總計金額 ${{ totalPrice }}</div>\r\n        <div\r\n          class=\"cart-item total-price discount\"\r\n          v-show=\"discountPrice !== totalPrice\"\r\n        >\r\n          折扣後金額 ${{ discountPrice }}\r\n        </div>\r\n        <div class=\"coupon\">\r\n          <input\r\n            type=\"text\"\r\n            v-model=\"couponCode\"\r\n            @keyup.enter=\"submitCoupon\"\r\n            placeholder=\"請輸入優惠碼\"\r\n          />\r\n          <input type=\"button\" value=\"套用優惠碼\" @click=\"submitCoupon\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"cart-action\">\r\n        <router-link to=\"/\">\r\n          <button class=\"step__shopping\">&lt;&lt; 繼續購物</button>\r\n        </router-link>\r\n        <router-link to=\"/createorder\">\r\n          <button class=\"step__primary\">下一步：填寫收件資料</button>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"cart__empty\">\r\n      <h1>尚無商品</h1>\r\n      <img src=\"../assets/smile.png\" alt />\r\n      <div>\r\n        <router-link to=\"/\">\r\n          <button class=\"step__shopping\">&lt;&lt; 繼續購物</button>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  name: \"cart\",\r\n  data() {\r\n    return {\r\n      couponCode: \"30off\",\r\n      isLoading: false,\r\n    };\r\n  },\r\n  computed: { ...mapState([\"cart\", \"totalPrice\", \"discountPrice\"]) },\r\n  methods: {\r\n    getCoupons() {\r\n      this.$store.dispatch(\"getCoupons\", process.env.VUE_APP_COUPONS_URL);\r\n    },\r\n    deleteProduct(product) {\r\n      this.$store.commit(\"deleteProduct\", product);\r\n    },\r\n    clearAll() {\r\n      this.$store.state.cart = [];\r\n      localStorage.setItem(\"cart\", JSON.stringify(this.cart));\r\n    },\r\n    submitCoupon(e) {\r\n      if (this.couponCode === \"\") {\r\n        e.target.previousElementSibling.focus();\r\n      } else {\r\n        this.isLoading = true;\r\n        const index = this.$store.state.coupons.findIndex(\r\n          (item) => item.code === this.couponCode\r\n        );\r\n        setTimeout(() => {\r\n          if (index !== -1) {\r\n            const foundCoupon = this.$store.state.coupons[index];\r\n            const today = new Date().getTime();\r\n            if (!foundCoupon.is_enabled) {\r\n              alert(\"找不到優惠券\"); //未啟用\r\n            } else if (new Date(foundCoupon.due_date).getTime() <= today) {\r\n              alert(\"優惠券已過期\"); //過期\r\n            } else {\r\n              this.$store.state.percentDiscount = this.$store.state.coupons[\r\n                index\r\n              ].percent;\r\n              this.couponCode = \"\";\r\n            }\r\n          } else {\r\n            alert(\"找不到優惠券\");\r\n            this.$store.state.percentDiscount = null;\r\n          }\r\n          this.isLoading = false;\r\n        }, 1000);\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.getCoupons();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.coupon {\r\n  margin: 9px 0;\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  justify-content: center;\r\n  input {\r\n    border: 1px solid gray;\r\n    outline: none;\r\n    padding: 12px 18px;\r\n    background: #17181c;\r\n    color: white;\r\n    &[type=\"text\"] {\r\n      width: 100%;\r\n      max-width: 510px;\r\n    }\r\n    &[type=\"button\"] {\r\n      width: 180px;\r\n      cursor: pointer;\r\n      &:hover {\r\n        background: gray;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CartPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CartPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CartPage.vue?vue&type=template&id=0906ead0&scoped=true&\"\nimport script from \"./CartPage.vue?vue&type=script&lang=js&\"\nexport * from \"./CartPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CartPage.vue?vue&type=style&index=0&id=0906ead0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0906ead0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}