(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-857c34d6"],{"022f":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._l(t.cart,(function(e){return r("div",{key:e.id,staticClass:"cart-item"},[r("div",{staticClass:"cart-item__name"},[r("img",{attrs:{src:e.src,alt:e.name}}),r("div",[t._v(t._s(e.name))])]),r("div",{staticClass:"cart-item__quantity"},[t._v(t._s(e.quantity))]),r("div",{staticClass:"cart-item__price"},[t._v("$"+t._s(e.price))]),r("div",{staticClass:"cart-item__total"},[t._v(" $"+t._s(e.quantity*e.price)+" ")])])})),r("div",{staticClass:"cart-item total-price"},[t._v("總計金額 $"+t._s(t.totalPrice))]),t.discountPrice!==t.totalPrice?r("div",{staticClass:"cart-item total-price discount"},[t._v(" 折扣後金額 $"+t._s(t.discountPrice)+" ")]):t._e()],2)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart-item"},[r("div",{staticClass:"cart-item__name"},[t._v("商品")]),r("div",{staticClass:"cart-item__quantity"},[t._v("數量")]),r("div",{staticClass:"cart-item__price"},[t._v("單價")]),r("div",{staticClass:"cart-item__total"},[t._v("小計")])])}],i=(r("a9e3"),{name:"Cart",props:{cart:Array,totalPrice:Number,discountPrice:Number}}),o=i,n=r("2877"),c=Object(n["a"])(o,a,s,!1,null,null,null);e["a"]=c.exports},"4fa1":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart"},[r("loading",{attrs:{active:t.isLoading,color:"white","background-color":"#17181c"},on:{"update:active":function(e){t.isLoading=e}}}),t._m(0),r("h1",[t._v("購物車清單")]),r("div",{staticClass:"cart-information"},[r("CartItem",{attrs:{cart:t.cart,totalPrice:t.totalPrice,discountPrice:t.discountPrice}})],1),r("h1",[t._v("請填寫收件資訊")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"useremail"}},[t._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],ref:"emailInput",attrs:{type:"email",id:"useremail",name:"email",placeholder:"請輸入Email",required:"true"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),r("label",{directives:[{name:"show",rawName:"v-show",value:t.form.email,expression:"form.email"}]},[t._v(t._s(t.emailError))])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],attrs:{type:"text",id:"username",name:"name",placeholder:"輸入姓名",required:"true"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.usertel,expression:"form.usertel"}],attrs:{type:"tel",name:"",id:"usertel",placeholder:"請輸入電話",required:"true"},domProps:{value:t.form.usertel},on:{input:function(e){e.target.composing||t.$set(t.form,"usertel",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.useraddress,expression:"form.useraddress"}],attrs:{type:"address",id:"useraddress",placeholder:"請輸入地址",required:"true"},domProps:{value:t.form.useraddress},on:{input:function(e){e.target.composing||t.$set(t.form,"useraddress",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"message"}},[t._v("留言")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],attrs:{name:"message",id:"message",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),r("input",{ref:"button",staticStyle:{display:"none"},attrs:{type:"submit",value:"送出表單"}})]),r("div",{staticClass:"cart-action"},[r("router-link",{attrs:{to:"/"}},[r("button",{staticClass:"step__shopping"},[t._v("<< 繼續購物")])]),r("div",[r("router-link",{attrs:{to:"/cart"}},[r("button",{staticClass:"step__primary"},[t._v("上一步")])]),r("button",{staticClass:"step__danger",on:{click:t.submitForm}},[t._v(" 下一步：完成訂單 ")])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showSuccess,expression:"showSuccess"}],staticClass:"modal"},[t._v("訂單完成!")])],1)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart-header"},[r("div",[t._v("1.確認購買清單")]),r("div",{staticClass:"active"},[t._v("2.填寫收件資訊")]),r("div",[t._v("3.完成訂單!")])])}],i=(r("a4d3"),r("4de4"),r("4160"),r("0d03"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("25f0"),r("159b"),r("2909")),o=(r("96cf"),r("ade3")),n=r("022f"),c=r("bc3a"),u=r.n(c),l=r("2f62");function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v={name:"order",components:{CartItem:n["a"]},data:function(){return{reg:/^.*?@[a-z]+\.[a-z]+/,showSuccess:!1,isLoading:!1}},computed:d({},Object(l["b"])(["cart","form","totalPrice","discountPrice"]),{emailError:function(){return""==this.form.email?"":this.reg.test(this.form.email)?"":"請輸入正確的Email格式"}}),methods:{createOrder:function(){var t,e,r,a,s=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t=function(){return Math.random().toString(36).substring(2)},e=t()+t(),r=(new Date).toLocaleString(),a={id:e,date:r,cart:Object(i["a"])(this.cart),form:d({},this.form),totalPrice:this.totalPrice,discountPrice:this.discountPrice,paymentStatus:!1},this.isLoading=!0,o.next=7,regeneratorRuntime.awrap(u.a.post("https://guarded-garden-48374.herokuapp.com/orders/",a));case 7:this.isLoading=!1,this.showSuccess=!0,setTimeout((function(){s.$router.push("/checkout/"+e),s.showSuccess=!1,s.$store.state.cart=[],localStorage.setItem("cart",JSON.stringify(s.$store.state.cart)),s.$store.state.form={},s.$store.percentDiscount=null}),1e3);case 10:case"end":return o.stop()}}),null,this)},submitForm:function(){this.emailError?this.$refs.emailInput.focus():this.$refs.button.click()}},mounted:function(){0==this.$store.state.cart.length&&this.$router.push("/")}},p=v,f=r("2877"),_=Object(f["a"])(p,a,s,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-857c34d6.d15f16bf.js.map