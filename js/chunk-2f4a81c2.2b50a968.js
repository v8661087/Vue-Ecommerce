(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f4a81c2"],{"0d03":function(t,e,i){var a=i("6eeb"),s=Date.prototype,c="Invalid Date",o="toString",r=s[o],n=s.getTime;new Date(NaN)+""!=c&&a(s,o,(function(){var t=n.call(this);return t===t?r.call(this):c}))},"0dce":function(t,e,i){"use strict";var a=i("8a3a"),s=i.n(a);s.a},"8a3a":function(t,e,i){},b83a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("loading",{attrs:{active:t.isLoading,color:"white","background-color":"#17181c"},on:{"update:active":function(e){t.isLoading=e}}}),t.cart.length?a("div",[t._m(0),a("h1",[t._v("購物車清單")]),a("div",{staticClass:"cart-information"},[a("div",{staticClass:"cart-item"},[a("div",{staticClass:"cart-item__action"},[a("button",{on:{click:t.clearAll}},[t._v("清除")])]),a("div",{staticClass:"cart-item__name"},[t._v("商品")]),a("div",{staticClass:"cart-item__quantity"},[t._v("數量")]),a("div",{staticClass:"cart-item__price"},[t._v("單價")]),a("div",{staticClass:"cart-item__total"},[t._v("小計")])]),t._l(t.cart,(function(e){return a("div",{key:e.id,staticClass:"cart-item"},[a("div",{staticClass:"cart-item__action"},[a("span",{on:{click:function(i){return t.deleteProduct(e)}}},[t._v("x")])]),a("div",{staticClass:"cart-item__name"},[a("img",{attrs:{src:e.src,alt:e.name}}),a("div",[t._v(t._s(e.name))])]),a("div",{staticClass:"cart-item__quantity"},[t._v(t._s(e.quantity))]),a("div",{staticClass:"cart-item__price"},[t._v("$"+t._s(e.price))]),a("div",{staticClass:"cart-item__total"},[t._v(" $"+t._s(e.quantity*e.price)+" ")])])})),a("div",{staticClass:"cart-item total-price"},[t._v("總計金額 $"+t._s(t.totalPrice))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.discountPrice!==t.totalPrice,expression:"discountPrice !== totalPrice"}],staticClass:"cart-item total-price discount"},[t._v(" 折扣後金額 $"+t._s(t.discountPrice)+" ")]),a("div",{staticClass:"coupon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitCoupon(e)},input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("input",{attrs:{type:"button",value:"套用優惠碼"},on:{click:t.submitCoupon}})])],2),a("div",{staticClass:"cart-action"},[a("router-link",{attrs:{to:"/"}},[a("button",{staticClass:"step__shopping"},[t._v("<< 繼續購物")])]),a("router-link",{attrs:{to:"/createorder"}},[a("button",{staticClass:"step__primary"},[t._v("下一步：填寫收件資料")])])],1)]):a("div",{staticClass:"cart__empty"},[a("h1",[t._v("尚無商品")]),a("img",{attrs:{src:i("84b1"),alt:""}}),a("div",[a("router-link",{attrs:{to:"/"}},[a("button",{staticClass:"step__shopping"},[t._v("<< 繼續購物")])])],1)])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cart-header"},[i("div",{staticClass:"active"},[t._v("1.確認購買清單")]),i("div",[t._v("2.填寫收件資訊")]),i("div",[t._v("3.完成訂單!")])])}],c=(i("a4d3"),i("4de4"),i("c740"),i("4160"),i("0d03"),i("e439"),i("dbb4"),i("b64b"),i("159b"),i("ade3")),o=i("2f62");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(c["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={name:"cart",data:function(){return{couponCode:"30off",isLoading:!1}},computed:n({},Object(o["b"])(["cart","totalPrice","discountPrice"])),methods:{getCoupons:function(){this.$store.dispatch("getCoupons","https://guarded-garden-48374.herokuapp.com/coupons/")},deleteProduct:function(t){this.$store.commit("deleteProduct",t)},clearAll:function(){this.$store.state.cart=[],localStorage.setItem("cart",JSON.stringify(this.cart))},submitCoupon:function(t){var e=this;if(""===this.couponCode)t.target.previousElementSibling.focus();else{this.isLoading=!0;var i=this.$store.state.coupons.findIndex((function(t){return t.code===e.couponCode}));setTimeout((function(){if(-1!==i){var t=e.$store.state.coupons[i],a=(new Date).getTime();t.is_enabled?new Date(t.due_date).getTime()<=a?alert("優惠券已過期"):(e.$store.state.percentDiscount=e.$store.state.coupons[i].percent,e.couponCode=""):alert("找不到優惠券")}else alert("找不到優惠券"),e.$store.state.percentDiscount=null;e.isLoading=!1}),1e3)}}},created:function(){this.getCoupons()}},l=u,d=(i("0dce"),i("2877")),p=Object(d["a"])(l,a,s,!1,null,"0906ead0",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2f4a81c2.2b50a968.js.map